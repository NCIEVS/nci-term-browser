<%@ page import="gov.nih.nci.evs.browser.utils.DataUtils" %>
<%@ page import="gov.nih.nci.evs.browser.utils.MetadataUtils" %>

<%
String menubar_scheme = DataUtils.getCodingSchemeName(dictionary);
if (menubar_scheme == null) {
    menubar_scheme = (String) request.getAttribute("scheme");
}

String menubar_version = DataUtils.getCodingSchemeVersion(dictionary);
if (menubar_version == null) {
    menubar_version =  (String) request.getAttribute("version");
}

String menubar_scheme0 = menubar_scheme;

Vector u = MetadataUtils.getMetadataNameValuePairs(menubar_scheme, menubar_version, null);
String download_site = null;
for (int j=0; j<u.size(); j++) {
   String s = (String) u.elementAt(j);
   Vector ret_vec = DataUtils.parseData(s, "|");
   String meta_prop_name = (String) ret_vec.elementAt(0);
   String meta_prop_value = (String) ret_vec.elementAt(1);
   if (meta_prop_name.equals("download_url") && !(meta_prop_value == null || meta_prop_value.compareTo("") == 0)) {
       download_site = meta_prop_value;
       break;
   }
}

if (menubar_scheme != null) {
menubar_scheme = menubar_scheme.replaceAll(" ", "%20");
}
if (menubar_version != null) {
menubar_version = menubar_version.replaceAll(" ", "%20");
}


%>

<div class="global-nav">
  <a href="<%= request.getContextPath() %>/pages/vocabulary.jsf?dictionary=<%=dictionary%>&scheme=<%=menubar_scheme%>&version=<%=menubar_version%>">Home</a>
<%  
  if (download_site != null) {
%>  
  | <a href="#" onclick="javascript:window.open('<%=download_site%>', '_blank','top=100, left=100, height=740, width=680, status=no, menubar=no, resizable=yes, scrollbars=yes, toolbar=no, location=no, directories=no');">
    Download
  </a>
<%  
  }
%> 
  
  | <a href="#" onclick="javascript:window.open('<%=request.getContextPath() %>/pages/hierarchy.jsf?dictionary=<%=dictionary%>&scheme=<%=menubar_scheme%>&version=<%=menubar_version%>', '_blank','top=100, left=100, height=740, width=680, status=no, menubar=no, resizable=yes, scrollbars=yes, toolbar=no, location=no, directories=no');">
    View Hierarchy
  </a>
  
<%  
  if (menubar_scheme0.compareTo("NCI Thesaurus") == 0) {
%>  
  | <a href="<%= request.getContextPath() %>/pages/subset.jsf">Subsets</a>
<%  
  }
%>   
  
  | <a href="<%= request.getContextPath() %>/pages/help.jsf">Help</a>
  | <A href="#" onmouseover="Tip('<a href=\'<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI Thesaurus&code=C4872\'>Breast Carcinoma</a><br><a href=\'<%= request.getContextPath() %>/ConceptReport.jsp?dictionary=NCI Thesaurus&code=C16394\'>Cell Aging</a><br>',WIDTH, 300, TITLE, 'Visited Concepts', SHADOW, true, FADEIN, 300, FADEOUT, 300, STICKY, 1, CLOSEBTN, true, CLICKCLOSE, true)" onmouseout=UnTip() >Visted Concepts</A>
</div>